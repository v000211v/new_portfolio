<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Publishing</title>
    <link rel="stylesheet" href="./css/common.css" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <link rel="stylesheet" href="./js/magnific-popup.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.0.9/fullpage.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.0.9/fullpage.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="./js/jquery.magnific-popup.min.js"></script>
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/publishing.css" />
  </head>
  <body>
    <!-- 헤더 -->
    <div class="header">
      <a href="./index.html" class="logo">
        <img src="./images/logo/logo.png" alt="" />
      </a>

      <ul class="list">
        <li><a href="#">publishing</a></li>
        <li><a href="#">design</a></li>
      </ul>
    </div>

    <section id="fullpage">
      <!-- 섹션01 -->
      <div class="section">
        <div class="container01">
          <div class="typing-txt">
            <ul>
              <li>Trovol 여행사 페이지</li>
              <li>
                Html과 Css, Javascript, jQuery를 활용한 세계 각지의 다양한 여행지에 대한 소개와
              </li>
              <li>여행 일정등을 게시한 여행사 페이지입니다.</li>
            </ul>
          </div>
          <div class="typing">
            <ul>
              <li class="title"></li>
              <li class="txt"></li>
              <li class="txt"></li>
            </ul>
          </div>

          <div class="btns">
            <a href="#">페이지 보기</a>
            <a href="#">github</a>
          </div>
        </div>
      </div>

      <!-- 섹션02 -->
      <div class="section">
        <div class="container02">
          <div class="typing-txt">
            <ul>
              <li>Trovol 여행사 페이지</li>
              <li>
                Html과 Css, Javascript, jQuery를 활용한 세계 각지의 다양한 여행지에 대한 소개와
              </li>
              <li>여행 일정등을 게시한 여행사 페이지입니다.</li>
            </ul>
          </div>
          <div class="typing">
            <ul>
              <li class="title"></li>
              <li class="txt"></li>
              <li class="txt"></li>
            </ul>
          </div>

          <div class="btns">
            <a href="#">페이지 보기</a>
            <a href="#">github</a>
          </div>
        </div>
      </div>

      <!-- 섹션03 -->
      <div class="section">
        <div class="container01">
          <div class="typing-txt">
            <ul>
              <li>Trovol 여행사 페이지</li>
              <li>
                Html과 Css, Javascript, jQuery를 활용한 세계 각지의 다양한 여행지에 대한 소개와
              </li>
              <li>여행 일정등을 게시한 여행사 페이지입니다.</li>
            </ul>
          </div>
          <div class="typing">
            <ul>
              <li class="title"></li>
              <li class="txt"></li>
              <li class="txt"></li>
            </ul>
          </div>

          <div class="btns">
            <a href="#">페이지 보기</a>
            <a href="#">github</a>
          </div>
        </div>
      </div>
    </section>

    <script>
      var typingBool = false
      var typingIdx = 0
      var liIndex = 0
      var liLength = $('.typing-txt>ul>li').length

      // 타이핑될 텍스트를 가져온다
      var typingTxt = $('.typing-txt>ul>li').eq(liIndex).text()
      typingTxt = typingTxt.split('') // 한글자씩 자른다.
      if (typingBool == false) {
        // 타이핑이 진행되지 않았다면
        typingBool = true
        var tyInt = setInterval(typing, 100) // 반복동작
      }

      function typing() {
        $('.typing ul li').removeClass('on')
        $('.typing ul li').eq(liIndex).addClass('on')
        if (typingIdx < typingTxt.length) {
          // 타이핑될 텍스트 길이만큼 반복
          $('.typing ul li').eq(liIndex).append(typingTxt[typingIdx]) // 한글자씩 이어준다.
          typingIdx++
        } else {
          if (liIndex < liLength - 1) {
            //다음문장으로  가기위해 인덱스를 1증가
            liIndex++
            //다음문장을 타이핑하기위한 셋팅
            typingIdx = 0
            typingBool = false
            typingTxt = $('.typing-txt>ul>li').eq(liIndex).text()

            //타이핑종료

            setTimeout(function () {
              //1초후에 다시 타이핑 반복 시작
              tyInt = setInterval(typing, 100)
            }, 1000)
          } else if (liIndex == liLength - 1) {
            //마지막 문장까지 써지면 반복종료
            clearInterval(tyInt)
          }
        }
      }

      // 풀페이지
      $('#fullpage').fullpage({
        navigation: true,
        menu: '#nav',
        anchors: ['page1', 'page2', 'page3', 'page4'],
        responsive: 900,
        onLeave: function () {
          $('.line').removeClass('active')
        },
        afterLoad: function () {
          $('.line').addClass('active')
        }
      })
    </script>
  </body>
</html>
